We put these two tags in META-INF/context.xml

<Context path="/fabflix">

	<Resource name="jdbc/read" auth="Container" type="javax.sql.DataSource"
		 maxActive="100" maxIdle="30" maxWait="10000"
		 username="root" password="futurama5" driverClassName="com.mysql.jdbc.Driver"
		 url="jdbc:mysql://localhost:3306/moviedb" />
		 
	<Resource name="jdbc/write" auth="Container" type="javax.sql.DataSource"
		 maxActive="100" maxIdle="30" maxWait="10000"
		 username="root" password="futurama5" driverClassName="com.mysql.jdbc.Driver"
		 url="jdbc:mysql://172.31.36.98:3306/moviedb" />
		 
</Context>

When we read, we get data from the localhost
When we write/insert data into the database we will write to the master's database. It will then tell the slave to update its rows

Heres the code we used to access the database:

Write:
Context initCtx = new InitialContext();
Context envCtx = (Context) initCtx.lookup("java:comp/env");
DataSource ds = (DataSource) envCtx.lookup("jdbc/write");
//conn = DriverManager.getConnection("jdbc:mysql:///"+db, user, pass);
conn = ds.getConnection();

Read:
Context initCtx = new InitialContext();
Context envCtx = (Context) initCtx.lookup("java:comp/env");
DataSource ds = (DataSource) envCtx.lookup("jdbc/read");
//conn = DriverManager.getConnection("jdbc:mysql:///"+db, user, pass);
conn = ds.getConnection();